<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Instructor: Narjes Mathlouthi">
<meta name="dcterms.date" content="2025-07-27">

<title>Lab 6 Solutions: Basic Hypothesis Testing &amp; Simple Regression – PSTAT5A</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../theme/styles.css">
<link rel="stylesheet" href="../../../files/lecture_notes/theme/lecture-styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../img/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">PSTAT5A</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> <i class="bi bi-house" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../schedule.html"> <i class="bi bi-calendar" role="img">
</i> 
<span class="menu-text">Class Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../syllabus.html"> <i class="bi bi-file-earmark-text" role="img">
</i> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../resources.html"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../contact.html"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-youll-learn-today" id="toc-what-youll-learn-today" class="nav-link active" data-scroll-target="#what-youll-learn-today">What You’ll Learn Today</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#task-1-one-sample-t-test" id="toc-task-1-one-sample-t-test" class="nav-link" data-scroll-target="#task-1-one-sample-t-test">Task 1: One-Sample T-Test</a>
  <ul class="collapse">
  <li><a href="#what-is-a-one-sample-t-test" id="toc-what-is-a-one-sample-t-test" class="nav-link" data-scroll-target="#what-is-a-one-sample-t-test">What is a One-Sample T-Test?</a>
  <ul class="collapse">
  <li><a href="#scenario" id="toc-scenario" class="nav-link" data-scroll-target="#scenario">Scenario</a></li>
  <li><a href="#step-1-explore-the-data" id="toc-step-1-explore-the-data" class="nav-link" data-scroll-target="#step-1-explore-the-data">Step 1: Explore the Data</a></li>
  <li><a href="#step-2-set-up-your-hypotheses" id="toc-step-2-set-up-your-hypotheses" class="nav-link" data-scroll-target="#step-2-set-up-your-hypotheses">Step 2: Set Up Your Hypotheses</a></li>
  <li><a href="#step-3-calculate-the-test-statistic" id="toc-step-3-calculate-the-test-statistic" class="nav-link" data-scroll-target="#step-3-calculate-the-test-statistic">Step 3: Calculate the Test Statistic</a></li>
  <li><a href="#step-4-find-the-p-value" id="toc-step-4-find-the-p-value" class="nav-link" data-scroll-target="#step-4-find-the-p-value">Step 4: Find the P-Value</a></li>
  <li><a href="#step-5-make-your-decision" id="toc-step-5-make-your-decision" class="nav-link" data-scroll-target="#step-5-make-your-decision">Step 5: Make Your Decision</a></li>
  <li><a href="#step-6-verify-with-python" id="toc-step-6-verify-with-python" class="nav-link" data-scroll-target="#step-6-verify-with-python">Step 6: Verify with Python</a></li>
  <li><a href="#step-7-visualize-your-results" id="toc-step-7-visualize-your-results" class="nav-link" data-scroll-target="#step-7-visualize-your-results">Step 7: Visualize Your Results</a></li>
  <li><a href="#reflection-questions---solutions" id="toc-reflection-questions---solutions" class="nav-link" data-scroll-target="#reflection-questions---solutions">🤔 Reflection Questions - SOLUTIONS</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#task-2-simple-linear-regression" id="toc-task-2-simple-linear-regression" class="nav-link" data-scroll-target="#task-2-simple-linear-regression">Task 2: Simple Linear Regression</a>
  <ul class="collapse">
  <li><a href="#scenario-1" id="toc-scenario-1" class="nav-link" data-scroll-target="#scenario-1">Scenario</a></li>
  <li><a href="#step-1-explore-the-data-1" id="toc-step-1-explore-the-data-1" class="nav-link" data-scroll-target="#step-1-explore-the-data-1">Step 1: Explore the Data</a></li>
  <li><a href="#step-2-calculate-and-interpret-correlation" id="toc-step-2-calculate-and-interpret-correlation" class="nav-link" data-scroll-target="#step-2-calculate-and-interpret-correlation">Step 2: Calculate and Interpret Correlation</a></li>
  <li><a href="#step-3-fit-the-linear-regression-model" id="toc-step-3-fit-the-linear-regression-model" class="nav-link" data-scroll-target="#step-3-fit-the-linear-regression-model">Step 3: Fit the Linear Regression Model</a></li>
  <li><a href="#step-4-test-statistical-significance" id="toc-step-4-test-statistical-significance" class="nav-link" data-scroll-target="#step-4-test-statistical-significance">Step 4: Test Statistical Significance</a></li>
  <li><a href="#step-5-make-predictions" id="toc-step-5-make-predictions" class="nav-link" data-scroll-target="#step-5-make-predictions">Step 5: Make Predictions</a></li>
  <li><a href="#step-6-check-model-assumptions" id="toc-step-6-check-model-assumptions" class="nav-link" data-scroll-target="#step-6-check-model-assumptions">Step 6: Check Model Assumptions</a></li>
  <li><a href="#step-7-visualize-your-results-1" id="toc-step-7-visualize-your-results-1" class="nav-link" data-scroll-target="#step-7-visualize-your-results-1">Step 7: Visualize Your Results</a></li>
  <li><a href="#step-8-interpret-your-model" id="toc-step-8-interpret-your-model" class="nav-link" data-scroll-target="#step-8-interpret-your-model">Step 8: Interpret Your Model</a></li>
  <li><a href="#reflection-questions---solutions-1" id="toc-reflection-questions---solutions-1" class="nav-link" data-scroll-target="#reflection-questions---solutions-1">🤔 Reflection Questions - SOLUTIONS</a></li>
  <li><a href="#lab-summary" id="toc-lab-summary" class="nav-link" data-scroll-target="#lab-summary">🎯 Lab Summary</a>
  <ul class="collapse">
  <li><a href="#what-you-accomplished" id="toc-what-you-accomplished" class="nav-link" data-scroll-target="#what-you-accomplished">What You Accomplished</a></li>
  <li><a href="#key-skills-developed" id="toc-key-skills-developed" class="nav-link" data-scroll-target="#key-skills-developed">Key Skills Developed</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lab6_sln.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 6 Solutions: Basic Hypothesis Testing &amp; Simple Regression</h1>
<p class="subtitle lead">PSTAT 5A - Summer Session A 2025</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Instructor: Narjes Mathlouthi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 27, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>



<div class="no-row-height column-margin column-container"><div class="">
<p><img src="../../../img/logo.png" class="img-fluid" width="100"></p>
</div></div><div class="time-box">
<p>⏱️ <strong>Total Lab Time:</strong> 50 minutes</p>
</div>
<p>Welcome to Lab 6 Solutions! This lab focuses on two fundamental areas of statistical analysis that you’ll use throughout your data science journey: <strong>hypothesis testing</strong> and <strong>simple linear regression</strong>. These tools allow us to make data-driven decisions and understand relationships between variables.</p>
<section id="what-youll-learn-today" class="level2">
<h2 class="anchored" data-anchor-id="what-youll-learn-today">What You’ll Learn Today</h2>
<p>By the end of this lab, you’ll be able to:</p>
<ul>
<li><strong>Conduct hypothesis tests</strong> to determine if sample data provides evidence against a claim</li>
<li><strong>Model relationships</strong> between variables using simple linear regression</li>
<li><strong>Make predictions</strong> based on data patterns</li>
<li><strong>Interpret statistical results</strong> in plain English for real-world applications</li>
</ul>
<hr>
</section>
<section id="getting-started" class="level1">
<h1>Getting Started</h1>
<div class="time-box">
<p>⏱️ <strong>Estimated time:</strong> 5 minutes</p>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Setup
</div>
</div>
<div class="callout-body-container callout-body">
<p>Navigate to our class <a href="https://pstat5a.lsit.ucsb.edu/">Jupyterhub Instance</a>. Create a new notebook and rename it “<strong>lab6</strong>” (for detailed instructions view <a href="../../../files/labs/lab1/lab1.pdf">lab1</a>).</p>
<p>First, let’s load our tools! Copy the below code to get started! We’ll be using the following core libraries:</p>
<ul>
<li><strong><a href="https://numpy.org/doc/">NumPy</a></strong>: Fundamental package for fast array-based numerical computing.<br>
</li>
<li><strong><a href="https://matplotlib.org/stable/contents.html">Matplotlib</a></strong> (<code>pyplot</code>): Primary library for creating static 2D plots and figures.<br>
</li>
<li><strong><a href="https://docs.scipy.org/doc/scipy/reference/stats.html">SciPy</a></strong> (<code>stats</code>): Collection of scientific algorithms, including probability distributions and statistical tests.<br>
</li>
<li><strong><a href="https://pandas.pydata.org/docs/">Pandas</a></strong>: High-performance data structures (<code>DataFrame</code>) and tools for data wrangling and analysis.<br>
</li>
<li><strong><a href="https://www.statsmodels.org/stable/index.html">Statsmodels</a></strong>: Econometric and statistical modeling for regression analysis, time series, and more.<br>
</li>
<li><strong><a href="https://seaborn.pydata.org/">Seaborn</a></strong>:Seaborn is a Python data visualization library based on <code>matplotlib</code>. It provides a high-level interface for drawing attractive and informative statistical graphics.</li>
</ul>
</div>
</div>
<div id="d231e9ca" class="cell" data-message="false" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install any missing packages (will skip those already installed)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!%pip install --quiet numpy matplotlib scipy pandas statsmodels seaborn</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load our tools (libraries)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Make our graphs look nice</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'seaborn-v0_8-whitegrid'</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>sns.set_palette(<span class="st">"husl"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Set random seed for reproducible results</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✅ All tools loaded successfully!"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ All tools loaded successfully!</code></pre>
</div>
</div>
<hr>
</section>
<section id="task-1-one-sample-t-test" class="level1">
<h1>Task 1: One-Sample T-Test</h1>
<div class="time-box">
<p>⏱️ <strong>Estimated time:</strong> 20 minutes</p>
</div>
<section id="what-is-a-one-sample-t-test" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-one-sample-t-test">What is a One-Sample T-Test?</h2>
<p>A <strong>one-sample t-test</strong> helps us determine whether a sample mean is significantly different from a claimed or hypothesized population mean. It’s one of the most common statistical tests you’ll encounter.</p>
<p><strong>Real-world example</strong>: A coffee shop advertises that their espresso shots contain an average of 75mg of caffeine. As a health-conscious consumer (or maybe a caffeine researcher!), you want to test this claim. You collect a sample of espresso shots and measure their caffeine content.</p>
<p><strong>The Question</strong>: Is the actual average caffeine content different from what the coffee shop claims?</p>
<section id="scenario" class="level3 task-box">
<h3 class="anchored" data-anchor-id="scenario">Scenario</h3>
<p>A coffee shop claims their average espresso shot contains <strong>75 mg</strong> of caffeine. You suspect it’s actually <strong>higher</strong>. You test <strong>20 shots</strong> and want to test at <strong><span class="math inline">\alpha = 0.05</span></strong> significance level.</p>
<p><strong>Your Goal</strong>: Determine if there’s sufficient evidence that the actual caffeine content exceeds the coffee shop’s claim.</p>
</section>
<section id="step-1-explore-the-data" class="level3">
<h3 class="anchored" data-anchor-id="step-1-explore-the-data">Step 1: Explore the Data</h3>
<div id="05172e87" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate caffeine data for our analysis</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">123</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>caffeine_data <span class="op">=</span> np.random.normal(<span class="dv">78</span>, <span class="dv">8</span>, <span class="dv">20</span>)  <span class="co"># Sample data: n=20 espresso shots</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"☕ Coffee Shop Caffeine Analysis"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">40</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📊 Sample size: </span><span class="sc">{</span><span class="bu">len</span>(caffeine_data)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📈 Sample mean: </span><span class="sc">{</span>np<span class="sc">.</span>mean(caffeine_data)<span class="sc">:.2f}</span><span class="ss"> mg"</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📊 Sample std dev: </span><span class="sc">{</span>np<span class="sc">.</span>std(caffeine_data, ddof<span class="op">=</span><span class="dv">1</span>)<span class="sc">:.2f}</span><span class="ss"> mg"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🏪 Coffee shop's claim: 75 mg"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's look at our raw data</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🔍 First 10 caffeine measurements:"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>([<span class="ss">f"</span><span class="sc">{</span>x<span class="sc">:.1f}</span><span class="ss">"</span> <span class="cf">for</span> x <span class="kw">in</span> caffeine_data[:<span class="dv">10</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>☕ Coffee Shop Caffeine Analysis
========================================
📊 Sample size: 20
📈 Sample mean: 78.92 mg
📊 Sample std dev: 10.06 mg
🏪 Coffee shop's claim: 75 mg

🔍 First 10 caffeine measurements:
['69.3', '86.0', '80.3', '65.9', '73.4', '91.2', '58.6', '74.6', '88.1', '71.1']</code></pre>
</div>
</div>
</section>
<section id="step-2-set-up-your-hypotheses" class="level3">
<h3 class="anchored" data-anchor-id="step-2-set-up-your-hypotheses">Step 2: Set Up Your Hypotheses</h3>
<p><strong>Think about this carefully:</strong> - What does the coffee shop claim? (This becomes your null hypothesis) - What do you suspect? (This becomes your alternative hypothesis) - Are you testing if the caffeine content is different, higher, or lower?</p>
<div id="7276cc91" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📝 STEP 1: Setting Up Hypotheses"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">35</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Complete these hypotheses</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"$H_0$ (Null Hypothesis): $</span><span class="ch">\\</span><span class="st">mu$ = 75 mg"</span>)        <span class="co"># Coffee shop's claim</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"$H_1$ (Alternative Hypothesis): $</span><span class="ch">\\</span><span class="st">mu$ &gt; 75 mg"</span>)  <span class="co"># We suspect it's higher</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: What type of test is this?</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Test type: RIGHT-tailed test"</span>)   <span class="co"># Testing if mean is greater than 75</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">💡 Explanation:"</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"• $H_0$ represents the coffee shop's claim (status quo)"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"• $H_1$ represents what we suspect is actually true"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"• We use $</span><span class="ch">\\</span><span class="st">alpha$ = 0.05 as our significance level"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📝 STEP 1: Setting Up Hypotheses
===================================
$H_0$ (Null Hypothesis): $\mu$ = 75 mg
$H_1$ (Alternative Hypothesis): $\mu$ &gt; 75 mg
Test type: RIGHT-tailed test

💡 Explanation:
• $H_0$ represents the coffee shop's claim (status quo)
• $H_1$ represents what we suspect is actually true
• We use $\alpha$ = 0.05 as our significance level</code></pre>
</div>
</div>
<p><strong>✅ Answer Key:</strong> - <span class="math inline">H_0</span>: <span class="math inline">\mu</span> = 75 mg (coffee shop’s claim) - <span class="math inline">H_1</span>: <span class="math inline">\mu</span> &gt; 75 mg (we suspect it’s higher) - Right-tailed test (testing if mean is greater than 75)</p>
</section>
<section id="step-3-calculate-the-test-statistic" class="level3">
<h3 class="anchored" data-anchor-id="step-3-calculate-the-test-statistic">Step 3: Calculate the Test Statistic</h3>
<p>The t-statistic formula is: <strong><span class="math inline">t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}}</span></strong></p>
<div id="9575f59b" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"🔢 STEP 2: Calculating Test Statistic"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">38</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the components</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>sample_mean <span class="op">=</span> np.mean(caffeine_data)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>sample_std <span class="op">=</span> np.std(caffeine_data, ddof<span class="op">=</span><span class="dv">1</span>)  <span class="co"># ddof=1 for sample std dev</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">len</span>(caffeine_data)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>claimed_mean <span class="op">=</span> <span class="dv">75</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sample mean ($</span><span class="ch">\\</span><span class="ss">bar</span><span class="ch">{{</span><span class="ss">x</span><span class="ch">}}</span><span class="ss">$): </span><span class="sc">{</span>sample_mean<span class="sc">:.3f}</span><span class="ss"> mg"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sample std dev (s): </span><span class="sc">{</span>sample_std<span class="sc">:.3f}</span><span class="ss"> mg"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sample size (n): </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Claimed mean ($</span><span class="ch">\\</span><span class="ss">mu_0$): </span><span class="sc">{</span>claimed_mean<span class="sc">}</span><span class="ss"> mg"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Calculate the t-statistic using the formula above</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>t_statistic <span class="op">=</span> (sample_mean <span class="op">-</span> claimed_mean) <span class="op">/</span> (sample_std <span class="op">/</span> np.sqrt(n))</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>degrees_freedom <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📐 Formula: $t = </span><span class="ch">\\</span><span class="ss">frac</span><span class="ch">{{\\</span><span class="ss">bar</span><span class="ch">{{</span><span class="ss">x</span><span class="ch">}}</span><span class="ss"> - </span><span class="ch">\\</span><span class="ss">mu_0</span><span class="ch">}}{{</span><span class="ss">s / </span><span class="ch">\\</span><span class="ss">sqrt</span><span class="ch">{{</span><span class="ss">n</span><span class="ch">}}}}</span><span class="ss">$"</span>)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📐 Calculation: t = (</span><span class="sc">{</span>sample_mean<span class="sc">:.3f}</span><span class="ss"> - </span><span class="sc">{</span>claimed_mean<span class="sc">}</span><span class="ss">) / (</span><span class="sc">{</span>sample_std<span class="sc">:.3f}</span><span class="ss"> / √</span><span class="sc">{</span>n<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📊 t-statistic: </span><span class="sc">{</span>t_statistic<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📊 Degrees of freedom: </span><span class="sc">{</span>degrees_freedom<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔢 STEP 2: Calculating Test Statistic
======================================
Sample mean ($\bar{x}$): 78.915 mg
Sample std dev (s): 10.060 mg
Sample size (n): 20
Claimed mean ($\mu_0$): 75 mg

📐 Formula: $t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}}$
📐 Calculation: t = (78.915 - 75) / (10.060 / √20)
📊 t-statistic: 1.741
📊 Degrees of freedom: 19</code></pre>
</div>
</div>
</section>
<section id="step-4-find-the-p-value" class="level3">
<h3 class="anchored" data-anchor-id="step-4-find-the-p-value">Step 4: Find the P-Value</h3>
<p>For a <strong>right-tailed test</strong>, the p-value is the probability of getting a t-statistic as extreme or more extreme than what we observed.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What exactly is a p‑value?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Loosely speaking, the p‑value answers the question:</p>
<blockquote class="blockquote">
<p><em>“If the null hypothesis were true, how surprising would my sample be?”</em></p>
</blockquote>
<p>Formally, it is the probability, calculated under the assumption that the null hypothesis is correct; of obtaining a test statistic <strong>as extreme or more extreme</strong> than the one observed.</p>
<ul>
<li><strong>Small p‑value (e.g., &lt; 0.05)</strong> → data are rare under <span class="math inline">H_0</span> → strong evidence <em>against</em> <span class="math inline">H_0</span>.<br>
</li>
<li><strong>Large p‑value</strong> → data are plausible under <span class="math inline">H_0</span> → little or no evidence against <span class="math inline">H_0</span>.</li>
</ul>
<p><strong>Important:</strong> A p‑value does <strong>not</strong> give the probability that the null hypothesis is true; it quantifies how incompatible your data are with <span class="math inline">H_0</span>.</p>
</div>
</div>
<div id="6828b797" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📈 STEP 3: Finding the P-Value"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">32</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Calculate p-value for right-tailed test</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># For right-tailed test, p-value = 1 - stats.t.cdf(t_statistic, df)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>p_value <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> stats.t.cdf(t_statistic, degrees_freedom)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🎯 P-value calculation:"</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   P(t &gt; </span><span class="sc">{</span>t_statistic<span class="sc">:.3f}</span><span class="ss">) = </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">💭 Interpretation:"</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   If the coffee shop's claim is true ($</span><span class="ch">\\</span><span class="ss">mu$ = 75),"</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   there's a </span><span class="sc">{</span>p_value<span class="sc">:.1%}</span><span class="ss"> chance of getting a sample"</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   mean as high or higher than </span><span class="sc">{</span>sample_mean<span class="sc">:.2f}</span><span class="ss"> mg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📈 STEP 3: Finding the P-Value
================================
🎯 P-value calculation:
   P(t &gt; 1.741) = 0.0490

💭 Interpretation:
   If the coffee shop's claim is true ($\mu$ = 75),
   there's a 4.9% chance of getting a sample
   mean as high or higher than 78.92 mg</code></pre>
</div>
</div>
</section>
<section id="step-5-make-your-decision" class="level3">
<h3 class="anchored" data-anchor-id="step-5-make-your-decision">Step 5: Make Your Decision</h3>
<p>Compare your p-value to <span class="math inline">\alpha = 0.05</span> and make a statistical decision.</p>
<div id="1ee80e8f" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"⚖️ STEP 4: Making the Decision"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">31</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🎯 Significance level ($</span><span class="ch">\\</span><span class="ss">alpha$): </span><span class="sc">{</span>alpha<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📊 P-value: </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📋 Decision rule: Reject $H_0$ if p-value &lt; $</span><span class="ch">\\</span><span class="ss">alpha$"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🔍 Comparison:"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss"> &lt; </span><span class="sc">{</span>alpha<span class="sc">}</span><span class="ss"> ✅"</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Decision: **REJECT $H_0$**"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Conclusion: There IS sufficient evidence that"</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"             the average caffeine content &gt; 75 mg"</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   🏪 The coffee shop's claim appears to be FALSE"</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss"> ≥ </span><span class="sc">{</span>alpha<span class="sc">}</span><span class="ss"> ❌"</span>)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Decision: **FAIL TO REJECT $H_0$**"</span>)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Conclusion: There is NOT sufficient evidence that"</span>)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"             the average caffeine content &gt; 75 mg"</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   🏪 We cannot conclude the coffee shop's claim is false"</span>)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Write conclusion in plain English</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📝 Conclusion in plain English:"</span>)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Based on our sample of 20 espresso shots, we found"</span>)</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   strong statistical evidence that the coffee shop's"</span>)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   claim of 75mg caffeine is too low. The actual average"</span>)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   appears to be significantly higher than advertised."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>⚖️ STEP 4: Making the Decision
===============================
🎯 Significance level ($\alpha$): 0.05
📊 P-value: 0.0490
📋 Decision rule: Reject $H_0$ if p-value &lt; $\alpha$

🔍 Comparison:
   0.0490 &lt; 0.05 ✅
   Decision: **REJECT $H_0$**
   Conclusion: There IS sufficient evidence that
             the average caffeine content &gt; 75 mg
   🏪 The coffee shop's claim appears to be FALSE

📝 Conclusion in plain English:
   Based on our sample of 20 espresso shots, we found
   strong statistical evidence that the coffee shop's
   claim of 75mg caffeine is too low. The actual average
   appears to be significantly higher than advertised.</code></pre>
</div>
</div>
</section>
<section id="step-6-verify-with-python" class="level3">
<h3 class="anchored" data-anchor-id="step-6-verify-with-python">Step 6: Verify with Python</h3>
<p>Let’s double-check our work using Python’s built-in statistical functions.</p>
<div id="088722a1" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✅ VERIFICATION using scipy.stats"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">35</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use scipy's one-sample t-test function</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>t_stat_scipy, p_val_scipy <span class="op">=</span> stats.ttest_1samp(caffeine_data, <span class="dv">75</span>, alternative<span class="op">=</span><span class="st">'greater'</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📊 Your calculations:"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   t-statistic: </span><span class="sc">{</span>t_statistic<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   p-value: </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🐍 Python's calculations:"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   t-statistic: </span><span class="sc">{</span>t_stat_scipy<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   p-value: </span><span class="sc">{</span>p_val_scipy<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🎯 Match? </span><span class="sc">{</span><span class="bu">abs</span>(t_statistic <span class="op">-</span> t_stat_scipy) <span class="op">&lt;</span> <span class="fl">0.001</span> <span class="kw">and</span> <span class="bu">abs</span>(p_value <span class="op">-</span> p_val_scipy) <span class="op">&lt;</span> <span class="fl">0.001</span><span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ VERIFICATION using scipy.stats
===================================
📊 Your calculations:
   t-statistic: 1.741
   p-value: 0.0490

🐍 Python's calculations:
   t-statistic: 1.741
   p-value: 0.0490

🎯 Match? True</code></pre>
</div>
</div>
</section>
<section id="step-7-visualize-your-results" class="level3">
<h3 class="anchored" data-anchor-id="step-7-visualize-your-results">Step 7: Visualize Your Results</h3>
<div id="f54adc3d" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create visualizations to understand our test</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">6</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Sample data histogram with means</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>ax1.hist(caffeine_data, bins<span class="op">=</span><span class="dv">8</span>, density<span class="op">=</span><span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, color<span class="op">=</span><span class="st">'lightblue'</span>, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>         edgecolor<span class="op">=</span><span class="st">'black'</span>, label<span class="op">=</span><span class="st">'Sample Data'</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ax1.axvline(sample_mean, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="ss">f'Sample Mean = </span><span class="sc">{</span>sample_mean<span class="sc">:.1f}</span><span class="ss">mg'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>ax1.axvline(claimed_mean, color<span class="op">=</span><span class="st">'orange'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="ss">f'Claimed Mean = </span><span class="sc">{</span>claimed_mean<span class="sc">}</span><span class="ss">mg'</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Caffeine Content (mg)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Density'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'☕ Sample vs Claimed Caffeine Content'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>ax1.legend(fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: t-distribution with test statistic and p-value</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1000</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> stats.t.pdf(x, degrees_freedom)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>ax2.plot(x, y, <span class="st">'b-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="ss">f't-distribution (df=</span><span class="sc">{</span>degrees_freedom<span class="sc">}</span><span class="ss">)'</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>ax2.fill_between(x, y, alpha<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'lightblue'</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Shade the rejection region (right tail)</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>x_reject <span class="op">=</span> x[x <span class="op">&gt;=</span> t_statistic]</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>y_reject <span class="op">=</span> stats.t.pdf(x_reject, degrees_freedom)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>ax2.fill_between(x_reject, y_reject, alpha<span class="op">=</span><span class="fl">0.7</span>, color<span class="op">=</span><span class="st">'red'</span>, </span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>                label<span class="op">=</span><span class="ss">f'p-value = </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss">'</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>ax2.axvline(t_statistic, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="ss">f'Our t-statistic = </span><span class="sc">{</span>t_statistic<span class="sc">:.3f}</span><span class="ss">'</span>)</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'t-value'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Density'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'📊 T-Distribution with Test Statistic'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>ax2.legend(fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab6_sln_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="reflection-questions---solutions" class="level3">
<h3 class="anchored" data-anchor-id="reflection-questions---solutions">🤔 Reflection Questions - SOLUTIONS</h3>
<p>Answer these questions to check your understanding:</p>
<ol type="1">
<li><strong>Hypotheses</strong>: What were your null and alternative hypotheses? Why did you choose a right-tailed test?
<ul>
<li><strong>Answer</strong>: <span class="math inline">H_0</span>: <span class="math inline">\mu</span> = 75 mg, <span class="math inline">H_1</span>: <span class="math inline">\mu</span> &gt; 75 mg. We chose a right-tailed test because we specifically suspected the caffeine content was <em>higher</em> than claimed, not just different.</li>
</ul></li>
<li><strong>Test Choice</strong>: Why did you use a t-test instead of a z-test for this problem?
<ul>
<li><strong>Answer</strong>: We used a t-test because: (1) small sample size (n=20 &lt; 30), (2) population standard deviation unknown, (3) assuming approximately normal distribution.</li>
</ul></li>
<li><strong>Results</strong>: What was your t-statistic and p-value? What do these numbers mean?
<ul>
<li><strong>Answer</strong>: t ≈ 1.84, p ≈ 0.041. The t-statistic tells us how many standard errors our sample mean is above the claimed mean. The p-value tells us there’s only a 4.1% chance of seeing this result if the true mean were 75mg.</li>
</ul></li>
<li><strong>Decision</strong>: What was your final conclusion at <span class="math inline">\alpha = 0.05</span>? Do you reject or fail to reject the null hypothesis?
<ul>
<li><strong>Answer</strong>: We REJECT <span class="math inline">H_0</span> because p-value (0.041) &lt; α (0.05). There’s sufficient evidence that the actual caffeine content exceeds 75mg.</li>
</ul></li>
<li><strong>Real-World Impact</strong>: If you were advising the coffee shop, what would you tell them based on your analysis?
<ul>
<li><strong>Answer</strong>: “Your espresso shots appear to contain significantly more caffeine than advertised. You should either update your labeling to reflect the actual content or adjust your brewing process to match your claim.”</li>
</ul></li>
</ol>
<hr>
</section>
</section>
</section>
<section id="task-2-simple-linear-regression" class="level1">
<h1>Task 2: Simple Linear Regression</h1>
<div class="time-box">
<p>⏱️ <strong>Estimated time:</strong> 25 minutes</p>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is Simple Linear Regression?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Simple linear regression helps us understand and model the relationship between two continuous variables. Unlike hypothesis testing (which answers yes/no questions), regression helps us predict outcomes and quantify relationships.</p>
<p><strong>Real-world example</strong>: As a student, you’ve probably wondered: “If I study more hours, how much will my exam score improve?” Linear regression can help answer this question by finding the relationship between study time and exam performance.</p>
<p><strong>The Question</strong>: Can we predict exam scores based on hours studied? And if so, how much does each additional hour of studying improve your expected score?</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
At a glance — what you’ll do
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li>Explore &amp; visualize the data</li>
<li>Measure correlation (r) and <span class="math inline">R^2</span></li>
<li>Fit the regression line <span class="math inline">\hat{y} = \beta_0 + \beta_1 x</span></li>
<li>Test if the slope is significant</li>
<li>Predict new values &amp; quantify error</li>
<li>Check model assumptions</li>
<li>Visualize diagnostics</li>
<li>Write a plain‑English conclusion</li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Concepts:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><strong>Correlation</strong>: How strongly two variables move together (-1 to +1)</li>
<li><strong>Slope</strong>: How much <span class="math inline">Y</span> changes when X increases by <span class="math inline">1</span> unit</li>
<li><strong>Intercept</strong>: The predicted value of <span class="math inline">Y</span> when <span class="math inline">X = 0</span></li>
<li><strong><span class="math inline">R^2</span></strong>: What percentage of the variation in <span class="math inline">Y</span> is explained by <span class="math inline">X</span></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Remember</strong>: Correlation does not imply causation! Just because two variables are related doesn’t mean one causes the other.</p>
</div>
</div>
<section id="scenario-1" class="level3 task-box">
<h3 class="anchored" data-anchor-id="scenario-1">Scenario</h3>
<p>You want to investigate the relationship between <strong>study hours</strong> and <strong>exam performance</strong>. You collect data from <span class="math inline">50</span> students about their weekly study hours and corresponding exam scores.</p>
<p><strong>Your Goal</strong>: Create a statistical model to predict exam scores based on study hours and determine how much each additional hour of studying helps.</p>
</section>
<section id="step-1-explore-the-data-1" class="level3">
<h3 class="anchored" data-anchor-id="step-1-explore-the-data-1">Step 1: Explore the Data</h3>
<div id="90deddb2" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate realistic study data</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">101</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>n_students <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Study hours (predictor variable X)</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>study_hours <span class="op">=</span> np.random.uniform(<span class="dv">1</span>, <span class="dv">20</span>, n_students)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Exam scores with linear relationship plus noise</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># True relationship: score = 65 + 2*hours + noise</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>true_intercept <span class="op">=</span> <span class="dv">65</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>true_slope <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>noise <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="dv">8</span>, n_students)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>exam_scores <span class="op">=</span> true_intercept <span class="op">+</span> true_slope <span class="op">*</span> study_hours <span class="op">+</span> noise</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create DataFrame for easier handling</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>study_data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'hours_studied'</span>: study_hours,</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'exam_score'</span>: exam_scores</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📚 Study Hours vs Exam Scores Analysis"</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">45</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"👥 Sample size: </span><span class="sc">{</span><span class="bu">len</span>(study_data)<span class="sc">}</span><span class="ss"> students"</span>)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"⏰ Study hours range: </span><span class="sc">{</span>study_hours<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.1f}</span><span class="ss"> to </span><span class="sc">{</span>study_hours<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.1f}</span><span class="ss"> hours"</span>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"📝 Exam scores range: </span><span class="sc">{</span>exam_scores<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.1f}</span><span class="ss"> to </span><span class="sc">{</span>exam_scores<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.1f}</span><span class="ss"> points"</span>)</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🔍 First 10 students:"</span>)</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(study_data.head(<span class="dv">10</span>).<span class="bu">round</span>(<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📚 Study Hours vs Exam Scores Analysis
=============================================
👥 Sample size: 50 students
⏰ Study hours range: 1.5 to 19.9 hours
📝 Exam scores range: 60.1 to 111.6 points

🔍 First 10 students:
   hours_studied  exam_score
0          10.81       88.53
1          11.84      104.66
2           1.54       60.14
3           4.26       75.09
4          14.02       83.95
5          16.84       98.69
6           6.83       86.87
7          17.98       99.70
8          14.71       94.17
9           4.61       79.42</code></pre>
</div>
</div>
<p><strong>🤔 Quick Questions:</strong></p>
<ul>
<li>Do you see any obvious pattern in the data?
<ul>
<li><strong>Answer</strong>: Yes! As study hours increase, exam scores tend to increase too.</li>
</ul></li>
<li>Which variable is the predictor (X) and which is the response (Y)?
<ul>
<li><strong>Answer</strong>: Study hours is the predictor (X), exam scores is the response (Y).</li>
</ul></li>
</ul>
</section>
<section id="step-2-calculate-and-interpret-correlation" class="level3">
<h3 class="anchored" data-anchor-id="step-2-calculate-and-interpret-correlation">Step 2: Calculate and Interpret Correlation</h3>
<p>Correlation measures how strongly two variables move together.</p>
<div id="af3d257d" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📊 STEP 1: Measuring the Relationship"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">40</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Calculate the correlation coefficient</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>correlation <span class="op">=</span> np.corrcoef(study_hours, exam_scores)[<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🔗 Correlation coefficient: r = </span><span class="sc">{</span>correlation<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Interpret the correlation strength</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">💭 Interpretation:"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">abs</span>(correlation) <span class="op">&lt;</span> <span class="fl">0.3</span>:</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    strength <span class="op">=</span> <span class="st">"weak"</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> <span class="bu">abs</span>(correlation) <span class="op">&lt;</span> <span class="fl">0.7</span>:</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    strength <span class="op">=</span> <span class="st">"moderate"</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    strength <span class="op">=</span> <span class="st">"strong"</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>direction <span class="op">=</span> <span class="st">"positive"</span> <span class="cf">if</span> correlation <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"negative"</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   This indicates a </span><span class="sc">{</span>strength<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>direction<span class="sc">}</span><span class="ss"> relationship"</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   between study hours and exam scores."</span>)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📋 What this means:"</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • r = </span><span class="sc">{</span>correlation<span class="sc">:.3f}</span><span class="ss"> means the variables are strongly related"</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • As study hours increase, exam scores tend to increase"</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • About </span><span class="sc">{</span>correlation<span class="op">**</span><span class="dv">2</span><span class="sc">:.1%}</span><span class="ss"> of the variation in scores"</span>)</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"     can be explained by study hours alone"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📊 STEP 1: Measuring the Relationship
========================================
🔗 Correlation coefficient: r = 0.753

💭 Interpretation:
   This indicates a strong positive relationship
   between study hours and exam scores.

📋 What this means:
   • r = 0.753 means the variables are strongly related
   • As study hours increase, exam scores tend to increase
   • About 56.8% of the variation in scores
     can be explained by study hours alone</code></pre>
</div>
</div>
<p><strong>✅ Check Your Understanding:</strong></p>
<ul>
<li>What does r = 0.8 vs r = 0.3 tell you?
<ul>
<li><strong>Answer</strong>: r = 0.8 indicates a strong relationship (variables move together closely), while r = 0.3 indicates a weak relationship (more scattered, less predictable).</li>
</ul></li>
<li>If r = -0.9, what would that mean?
<ul>
<li><strong>Answer</strong>: Very strong negative relationship - as one variable increases, the other decreases in a highly predictable way.</li>
</ul></li>
</ul>
</section>
<section id="step-3-fit-the-linear-regression-model" class="level3">
<h3 class="anchored" data-anchor-id="step-3-fit-the-linear-regression-model">Step 3: Fit the Linear Regression Model</h3>
<p>Now we’ll find the “line of best fit” through our data points.</p>
<div id="5ce38d64" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📐 STEP 2: Fitting the Regression Line"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">42</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the regression (add constant for intercept)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(study_hours)  <span class="co"># Add intercept term</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Fit the OLS (Ordinary Least Squares) model</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(exam_scores, X).fit()</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🎯 Regression Equation:"</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Exam Score = $</span><span class="ch">\\</span><span class="ss">beta_0$ + $</span><span class="ch">\\</span><span class="ss">beta_1$ × Hours Studied"</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Exam Score = </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss"> + </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss"> × Hours"</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📊 Model Coefficients:"</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Intercept ($</span><span class="ch">\\</span><span class="ss">beta_0$): </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">0</span>]<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Slope ($</span><span class="ch">\\</span><span class="ss">beta_1$): </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   R-squared ($R^2$): </span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Complete these interpretations</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">💡 What These Numbers Mean:"</span>)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   📌 Intercept (</span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">0</span>]<span class="sc">:.1f}</span><span class="ss">): Expected score with 0 hours of study"</span>)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   📈 Slope (</span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">): Each additional hour increases score by </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss"> points"</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   📊 $R^2$ (</span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">): Study hours explain </span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.1%}</span><span class="ss"> of score variation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📐 STEP 2: Fitting the Regression Line
==========================================
🎯 Regression Equation:
   Exam Score = $\beta_0$ + $\beta_1$ × Hours Studied
   Exam Score = 69.94 + 1.67 × Hours

📊 Model Coefficients:
   Intercept ($\beta_0$): 69.936
   Slope ($\beta_1$): 1.670
   R-squared ($R^2$): 0.568

💡 What These Numbers Mean:
   📌 Intercept (69.9): Expected score with 0 hours of study
   📈 Slope (1.67): Each additional hour increases score by 1.67 points
   📊 $R^2$ (0.568): Study hours explain 56.8% of score variation</code></pre>
</div>
</div>
</section>
<section id="step-4-test-statistical-significance" class="level3">
<h3 class="anchored" data-anchor-id="step-4-test-statistical-significance">Step 4: Test Statistical Significance</h3>
<p>Is the relationship we found statistically significant, or could it be due to chance?</p>
<div id="1eaf9f17" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"🔬 STEP 3: Testing Statistical Significance"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">46</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the slope is significantly different from zero</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>slope_pvalue <span class="op">=</span> model.pvalues[<span class="dv">1</span>]  <span class="co"># p-value for the slope</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🧪 Hypothesis Test for Slope:"</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   $H_0$: $</span><span class="ch">\\</span><span class="ss">beta_1$ = 0 (no relationship)"</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   $H_1$: $</span><span class="ch">\\</span><span class="ss">beta_1$ ≠ 0 (there is a relationship)"</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   $</span><span class="ch">\\</span><span class="ss">alpha$ = </span><span class="sc">{</span>alpha<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📊 Test Results:"</span>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Slope p-value: </span><span class="sc">{</span>slope_pvalue<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Make the decision</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> slope_pvalue <span class="op">&lt;</span> alpha:</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Decision: REJECT $H_0$"</span>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Conclusion: The relationship IS statistically significant"</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    significance <span class="op">=</span> <span class="st">"IS"</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Decision: FAIL TO REJECT $H_0$"</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   Conclusion: The relationship is NOT statistically significant"</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    significance <span class="op">=</span> <span class="st">"IS NOT"</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">✅ Bottom Line:"</span>)</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Study hours </span><span class="sc">{</span>significance<span class="sc">}</span><span class="ss"> a significant predictor of exam scores"</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Show confidence intervals</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>conf_int <span class="op">=</span> model.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📏 95% Confidence Intervals:"</span>)</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Intercept: [</span><span class="sc">{</span>conf_int[<span class="dv">0</span>,<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss">, </span><span class="sc">{</span>conf_int[<span class="dv">0</span>,<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">]"</span>)</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Slope: [</span><span class="sc">{</span>conf_int[<span class="dv">1</span>,<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss">, </span><span class="sc">{</span>conf_int[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔬 STEP 3: Testing Statistical Significance
==============================================
🧪 Hypothesis Test for Slope:
   $H_0$: $\beta_1$ = 0 (no relationship)
   $H_1$: $\beta_1$ ≠ 0 (there is a relationship)
   $\alpha$ = 0.05

📊 Test Results:
   Slope p-value: 0.000000
   Decision: REJECT $H_0$
   Conclusion: The relationship IS statistically significant

✅ Bottom Line:
   Study hours IS a significant predictor of exam scores

📏 95% Confidence Intervals:
   Intercept: [64.81, 75.06]
   Slope: [1.25, 2.09]</code></pre>
</div>
</div>
</section>
<section id="step-5-make-predictions" class="level3">
<h3 class="anchored" data-anchor-id="step-5-make-predictions">Step 5: Make Predictions</h3>
<p>Now let’s use our model to predict exam scores for different study scenarios.</p>
<div id="d253284d" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"🔮 STEP 4: Making Predictions"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">32</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Calculate predictions for different study hours</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>example_hours <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>]</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🎯 Prediction Examples:"</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> hours <span class="kw">in</span> example_hours:</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SOLUTION: Calculate predicted score</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    pred_score <span class="op">=</span> model.params[<span class="dv">0</span>] <span class="op">+</span> model.params[<span class="dv">1</span>] <span class="op">*</span> hours</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   📚 </span><span class="sc">{</span>hours<span class="sc">:2d}</span><span class="ss"> hours → Predicted score: </span><span class="sc">{</span>pred_score<span class="sc">:.1f}</span><span class="ss"> points"</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🤔 Your Turn:"</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Pick your own study hours and make a prediction</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>your_hours <span class="op">=</span> <span class="dv">12</span>  <span class="co"># Enter a number between 1-20</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>your_prediction <span class="op">=</span> model.params[<span class="dv">0</span>] <span class="op">+</span> model.params[<span class="dv">1</span>] <span class="op">*</span> your_hours</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   📚 </span><span class="sc">{</span>your_hours<span class="sc">}</span><span class="ss"> hours → Predicted score: </span><span class="sc">{</span>your_prediction<span class="sc">:.1f}</span><span class="ss"> points"</span>)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate residuals for analysis</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>y_predicted <span class="op">=</span> model.predict(X)</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>residuals <span class="op">=</span> exam_scores <span class="op">-</span> y_predicted</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>residual_std <span class="op">=</span> np.std(residuals, ddof<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📊 Prediction Accuracy:"</span>)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Average prediction error: ±</span><span class="sc">{</span>residual_std<span class="sc">:.1f}</span><span class="ss"> points"</span>)</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   This means most predictions are within ±</span><span class="sc">{</span>residual_std<span class="sc">:.1f}</span><span class="ss"> points of actual scores"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔮 STEP 4: Making Predictions
================================
🎯 Prediction Examples:
   📚  5 hours → Predicted score: 78.3 points
   📚 10 hours → Predicted score: 86.6 points
   📚 15 hours → Predicted score: 95.0 points
   📚 20 hours → Predicted score: 103.3 points

🤔 Your Turn:
   📚 12 hours → Predicted score: 90.0 points

📊 Prediction Accuracy:
   Average prediction error: ±8.2 points
   This means most predictions are within ±8.2 points of actual scores</code></pre>
</div>
</div>
</section>
<section id="step-6-check-model-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="step-6-check-model-assumptions">Step 6: Check Model Assumptions</h3>
<p>Before trusting our model, we need to verify it meets the assumptions of linear regression.</p>
<div id="11a7dc07" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✅ STEP 5: Checking Model Assumptions"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">42</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"🔍 Linear Regression Assumptions:"</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   1️⃣ Linear relationship between X and Y"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   2️⃣ Residuals are normally distributed"</span>) </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   3️⃣ Residuals have constant variance (homoscedasticity)"</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   4️⃣ Residuals are independent"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate residuals</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>y_predicted <span class="op">=</span> model.predict(X)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>residuals <span class="op">=</span> exam_scores <span class="op">-</span> y_predicted</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📊 Residual Analysis:"</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Mean residual: </span><span class="sc">{</span>np<span class="sc">.</span>mean(residuals)<span class="sc">:.6f}</span><span class="ss"> (should be ≈ 0)"</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Std of residuals: </span><span class="sc">{</span>np<span class="sc">.</span>std(residuals, ddof<span class="op">=</span><span class="dv">2</span>)<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co"># SOLUTION: Check normality of residuals using Shapiro-Wilk test</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> shapiro</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>shapiro_stat, shapiro_p <span class="op">=</span> shapiro(residuals)</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🧪 Normality Test (Shapiro-Wilk):"</span>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   p-value: </span><span class="sc">{</span>shapiro_p<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> shapiro_p <span class="op">&gt;</span> <span class="fl">0.05</span>:</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   ✅ Residuals appear normally distributed"</span>)</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   ⚠️ Residuals may not be normally distributed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ STEP 5: Checking Model Assumptions
==========================================
🔍 Linear Regression Assumptions:
   1️⃣ Linear relationship between X and Y
   2️⃣ Residuals are normally distributed
   3️⃣ Residuals have constant variance (homoscedasticity)
   4️⃣ Residuals are independent

📊 Residual Analysis:
   Mean residual: -0.000000 (should be ≈ 0)
   Std of residuals: 8.167

🧪 Normality Test (Shapiro-Wilk):
   p-value: 0.4928
   ✅ Residuals appear normally distributed</code></pre>
</div>
</div>
</section>
<section id="step-7-visualize-your-results-1" class="level3">
<h3 class="anchored" data-anchor-id="step-7-visualize-your-results-1">Step 7: Visualize Your Results</h3>
<div id="8e5a6117" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create comprehensive visualization</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>fig, ((ax1, ax2), (ax3, ax4)) <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">12</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Scatter plot with regression line</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>ax1.scatter(study_hours, exam_scores, alpha<span class="op">=</span><span class="fl">0.6</span>, color<span class="op">=</span><span class="st">'blue'</span>, s<span class="op">=</span><span class="dv">60</span>, </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="st">'Student Data'</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>sorted_hours <span class="op">=</span> np.sort(study_hours)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>sorted_predictions <span class="op">=</span> model.params[<span class="dv">0</span>] <span class="op">+</span> model.params[<span class="dv">1</span>] <span class="op">*</span> sorted_hours</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>ax1.plot(sorted_hours, sorted_predictions, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>         label<span class="op">=</span><span class="ss">f'y = </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">0</span>]<span class="sc">:.1f}</span><span class="ss"> + </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">x'</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Study Hours'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Exam Score'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="ss">f'📚 Study Hours vs Exam Scores</span><span class="ch">\n</span><span class="ss">$R^2$ = </span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">'</span>, </span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>              fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>ax1.legend(fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Residuals vs Fitted values</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>ax2.scatter(y_predicted, residuals, alpha<span class="op">=</span><span class="fl">0.6</span>, color<span class="op">=</span><span class="st">'purple'</span>, s<span class="op">=</span><span class="dv">50</span>)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>ax2.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'Fitted Values'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Residuals'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'🔍 Residuals vs Fitted</span><span class="ch">\n</span><span class="st">(Should show no pattern)'</span>, </span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>              fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 3: Q-Q plot for normality of residuals</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>stats.probplot(residuals, dist<span class="op">=</span><span class="st">"norm"</span>, plot<span class="op">=</span>ax3)</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">'📊 Q-Q Plot of Residuals</span><span class="ch">\n</span><span class="st">(Should be roughly linear)'</span>, </span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>              fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>ax3.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 4: Histogram of residuals</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>ax4.hist(residuals, bins<span class="op">=</span><span class="dv">12</span>, density<span class="op">=</span><span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, color<span class="op">=</span><span class="st">'lightgreen'</span>, </span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>         edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>ax4.set_xlabel(<span class="st">'Residuals'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>ax4.set_ylabel(<span class="st">'Density'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">'📈 Distribution of Residuals</span><span class="ch">\n</span><span class="st">(Should look normal)'</span>, </span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>              fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>ax4.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlay normal curve</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>x_norm <span class="op">=</span> np.linspace(residuals.<span class="bu">min</span>(), residuals.<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>y_norm <span class="op">=</span> stats.norm.pdf(x_norm, np.mean(residuals), np.std(residuals))</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>ax4.plot(x_norm, y_norm, <span class="st">'r-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Normal curve'</span>)</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>ax4.legend()</span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab6_sln_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="step-8-interpret-your-model" class="level3">
<h3 class="anchored" data-anchor-id="step-8-interpret-your-model">Step 8: Interpret Your Model</h3>
<div id="b21d7c5a" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📋 FINAL INTERPRETATION"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">25</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"🎯 Our Model: Exam Score = </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">0</span>]<span class="sc">:.1f}</span><span class="ss"> + </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss"> × Study Hours"</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">✅ Key Findings:"</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   📈 Strong positive relationship (r = </span><span class="sc">{</span>correlation<span class="sc">:.3f}</span><span class="ss">)"</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   📊 Study hours explain </span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.1%}</span><span class="ss"> of score variation"</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   🎯 Each extra hour → </span><span class="sc">{</span>model<span class="sc">.</span>params[<span class="dv">1</span>]<span class="sc">:.1f}</span><span class="ss"> point increase"</span>)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   🔬 Relationship is statistically significant (p &lt; 0.001)"</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">💡 Practical Insights:"</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   🏃‍♂️ Going from 5 to 10 hours of study:"</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>pred_5 <span class="op">=</span> model.params[<span class="dv">0</span>] <span class="op">+</span> model.params[<span class="dv">1</span>] <span class="op">*</span> <span class="dv">5</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>pred_10 <span class="op">=</span> model.params[<span class="dv">0</span>] <span class="op">+</span> model.params[<span class="dv">1</span>] <span class="op">*</span> <span class="dv">10</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>improvement <span class="op">=</span> pred_10 <span class="op">-</span> pred_5</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"      Expected score improvement: </span><span class="sc">{</span>improvement<span class="sc">:.1f}</span><span class="ss"> points"</span>)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">⚠️ Important Limitations:"</span>)</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • Correlation ≠ Causation"</span>)</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • Model only explains </span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.1%}</span><span class="ss"> of variation"</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • Other factors matter too (sleep, prior knowledge, etc.)"</span>)</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   • Predictions have uncertainty: ±</span><span class="sc">{</span>residual_std<span class="sc">:.1f}</span><span class="ss"> points"</span>)</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Show full model summary</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📊 Full Statistical Summary:"</span>)</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">30</span>)</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📋 FINAL INTERPRETATION
=========================
🎯 Our Model: Exam Score = 69.9 + 1.67 × Study Hours

✅ Key Findings:
   📈 Strong positive relationship (r = 0.753)
   📊 Study hours explain 56.8% of score variation
   🎯 Each extra hour → 1.7 point increase
   🔬 Relationship is statistically significant (p &lt; 0.001)

💡 Practical Insights:
   🏃‍♂️ Going from 5 to 10 hours of study:
      Expected score improvement: 8.4 points

⚠️ Important Limitations:
   • Correlation ≠ Causation
   • Model only explains 56.8% of variation
   • Other factors matter too (sleep, prior knowledge, etc.)
   • Predictions have uncertainty: ±8.2 points

📊 Full Statistical Summary:
==============================
                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.568
Model:                            OLS   Adj. R-squared:                  0.559
Method:                 Least Squares   F-statistic:                     63.01
Date:                Sun, 27 Jul 2025   Prob (F-statistic):           2.73e-10
Time:                        16:45:11   Log-Likelihood:                -174.93
No. Observations:                  50   AIC:                             353.9
Df Residuals:                      48   BIC:                             357.7
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const         69.9358      2.551     27.415      0.000      64.807      75.065
x1             1.6702      0.210      7.938      0.000       1.247       2.093
==============================================================================
Omnibus:                        2.245   Durbin-Watson:                   2.594
Prob(Omnibus):                  0.325   Jarque-Bera (JB):                1.440
Skew:                           0.139   Prob(JB):                        0.487
Kurtosis:                       2.217   Cond. No.                         26.9
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</section>
<section id="reflection-questions---solutions-1" class="level3">
<h3 class="anchored" data-anchor-id="reflection-questions---solutions-1">🤔 Reflection Questions - SOLUTIONS</h3>
<p>Test your understanding by answering these questions:</p>
<ol type="1">
<li><strong>Correlation vs Causation</strong>:
<ul>
<li>What was your correlation coefficient?
<ul>
<li><strong>Answer</strong>: r ≈ 0.89 (strong positive correlation)</li>
</ul></li>
<li>Does this prove that studying more <strong>causes</strong> higher exam scores? Why or why not?
<ul>
<li><strong>Answer</strong>: No! Correlation ≠ causation. While there’s a strong relationship, other factors could explain both variables (intelligence, motivation, time management skills) or the relationship could be reverse (students who are doing well might be motivated to study more).</li>
</ul></li>
</ul></li>
<li><strong>Model Interpretation</strong>:
<ul>
<li>What does the slope coefficient mean in practical terms?
<ul>
<li><strong>Answer</strong>: Each additional hour of study is associated with about 2.1 point increase in exam score on average.</li>
</ul></li>
<li>What does the intercept represent, and does it make sense?
<ul>
<li><strong>Answer</strong>: The intercept (~65) represents the predicted exam score for 0 hours of study. This might not be realistic (students likely have some baseline knowledge), but it’s a mathematical extrapolation.</li>
</ul></li>
</ul></li>
<li><strong>Prediction Quality</strong>:
<ul>
<li>What percentage of exam score variation is explained by study hours?
<ul>
<li><strong>Answer</strong>: About 79% (R² ≈ 0.79)</li>
</ul></li>
<li>How accurate are your predictions (what’s the typical error)?
<ul>
<li><strong>Answer</strong>: Typical prediction error is about ±8 points.</li>
</ul></li>
</ul></li>
<li><strong>Statistical Significance</strong>:
<ul>
<li>Is the relationship statistically significant?
<ul>
<li><strong>Answer</strong>: Yes, the p-value for the slope is much less than 0.05.</li>
</ul></li>
<li>What would it mean if the p-value for the slope was 0.20?
<ul>
<li><strong>Answer</strong>: We would fail to reject H₀ and conclude there’s insufficient evidence of a relationship between study hours and exam scores.</li>
</ul></li>
</ul></li>
<li><strong>Assumptions</strong>:
<ul>
<li>Based on your diagnostic plots, are the regression assumptions satisfied?
<ul>
<li><strong>Answer</strong>: Generally yes - residuals appear roughly normal and randomly scattered around zero with fairly constant variance.</li>
</ul></li>
<li>What would you do if the assumptions were violated?
<ul>
<li><strong>Answer</strong>: Consider data transformations, use different modeling approaches, or collect more data.</li>
</ul></li>
</ul></li>
<li><strong>Practical Application</strong>:
<ul>
<li>If you were advising a student, what would you tell them based on this analysis?
<ul>
<li><strong>Answer</strong>: “Study time appears to have a strong positive relationship with exam performance. Each extra hour might improve your score by about 2 points on average. However, remember that other factors also matter, and everyone is different.”</li>
</ul></li>
<li>What other variables might improve your prediction model?
<ul>
<li><strong>Answer</strong>: Sleep quality, prior GPA, attendance, quality of study methods, stress levels, nutrition, etc.</li>
</ul></li>
</ul></li>
</ol>
<hr>
</section>
<section id="lab-summary" class="level2">
<h2 class="anchored" data-anchor-id="lab-summary">🎯 Lab Summary</h2>
<p><strong>Congratulations!</strong> You’ve successfully completed Lab 6 and learned fundamental statistical analysis techniques:</p>
<section id="what-you-accomplished" class="level3">
<h3 class="anchored" data-anchor-id="what-you-accomplished">What You Accomplished</h3>
<p>✅ <strong>One-Sample T-Test</strong>: Tested a coffee shop’s caffeine claims using hypothesis testing</p>
<p>✅ <strong>Simple Linear Regression</strong>: Modeled the relationship between study hours and exam performance</p>
<p>✅ <strong>Statistical Interpretation</strong>: Translated statistical results into practical insights</p>
<p>✅ <strong>Critical Thinking</strong>: Distinguished between correlation and causation</p>
</section>
<section id="key-skills-developed" class="level3">
<h3 class="anchored" data-anchor-id="key-skills-developed">Key Skills Developed</h3>
<ul>
<li>Setting up and testing hypotheses</li>
<li>Calculating and interpreting p-values</li>
<li>Fitting regression models and making predictions</li>
<li>Checking model assumptions with diagnostic plots</li>
<li>Communicating statistical findings clearly</li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/pstat5a\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>